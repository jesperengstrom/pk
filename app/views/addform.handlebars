<section class="container-fluid d-flex flex-row full-height">
    <div class="col">
        <h2>Lägg till en observation</h2>
        <form class="mt-3" method="POST" action="/api/post">
            <div class="form-group">
                <label for="title" class="mb-2">
                    <strong>Titel:</strong>
                </label>
                <input type="text" name="title" class="form-control" required>
                <small class="form-text text-muted">Namnge observationen. Lämpligen efter vittnet, ex <em>Ulla S</em>.</small>
            </div>
            <div class="form-text mb-2"><strong>Plats:</strong></div>
            <div class="form-group form-inline">
                <label for="obs-lat" class="mr-2">Latitud:</label>
                <input type="number" name="obs-lat" step="any" class="form-control mr-2" id="obs-lat-box" required>
                <label for="obs-lng" class="mr-2">Longitud:</label>
                <input type="number" name="obs-lng" step="any" class="form-control mr-2" id="obs-lng-box" required>
                <small class="form-text text-muted">Hämta lat och lng genom att klicka på kartan.</small>
            </div>
            <div class="form-group form-inline">
                <label for="adress" class="mr-2">Adress:</label>
                <input type="text" id="adress-box" name="adress" class="form-control mr-2" required>
                <button type="button" id="coords-to-adress-btn" class="btn btn-primary mt-2 mr-2">Hämta adress</button>
                <button type="button" id="adress-to-coords-btn" class="btn btn-primary mt-2 mr-2">Sätt koordinater</button>
                <small class="form-text text-muted mt-2">"Hämta adress" hämtar närmsta adress från koordinaterna.</small>
                <small class="form-text text-muted mt-2">"Sätt koordinater" hämtar den aktuella adressens koordinater och placerar ut markören där. 
                    OBS! Markören hamnar i mitten av adressens "upptagningsområde". Den kan behöva finjusteras: zooma in och klicka på den exakta platsen.</small>
            </div>
            <div class="form-text mb-2"><strong>Tidpunkt:</strong></div>
            <div class="form-group form-inline">
                <label for="obs-date" class="mr-2">Datum:</label>
                <input type="date" name="obs-date" min="1986-01-01" max="1986-03-01" class="form-control mr-2" required>
                <label for="obs-time" class="mr-2">Tid:</label>
                <input type="time" name="obs-time" class="form-control mr-2" required>
            </div>
            <div class="form-text mb-2"><strong>Vittnesmålet:</strong></div>
            <div class="form-group">
                <label for="witness-name">Vittnets namn:</label>
                <input type="text" name="witness-name" class="form-control" required>
                <small class="form-text text-muted">Inga fullständiga namn, tänk på PUL. Ex <em>Ulla S</em>.</small>
                <label for="obs-summary">Observationen:</label>
                <textarea name="obs-summary" class="form-control" rows="5" required></textarea>
                <small class="form-text text-muted"></small>
                <label for="description">Signalement:</label>
                <textarea name="description" class="form-control" rows="2" required></textarea>
                <small class="form-text text-muted">Beskrivning av personen/personerna vittnet såg.</small>
                <div class="form-check mt-3">
                      <label class="form-check-label">
                          <input type="checkbox" id="witness-pos-checkbox" class="form-check-input mr-1">Klicka för att lägga till vittnets placering
                      </label>
                </div>
                <div class="form-inline">
                <label for="witness-lat" class="mr-2">Latitud:</label>
                <input type="number" name="witness-lat" step="any" class="form-control mr-2 witness-pos-box" id="witness-lat-box" disabled>
                <label for="witness-lng" class="mr-2">Longitud:</label>
                <input type="number" name="witness-lng" step="any" class="form-control mr-2 witness-pos-box" id="witness-lng-box" disabled>
                <small class="form-text text-muted hidden" id="witness-pos-helper">En ny markör syns nu på kartan. Denna sätter vittnets lat och longitud.</small>
            </div>
            </div>
            <div class="form-text mb-2"><strong>Poliskontakter:</strong></div>
            <div class="form-group form-inline">
                <label for="called-in" class="mr-2">Kontaktade polisen:</label>
                <input type="date" name="called-in" min="1986-02-28" class="form-control mr-2">
                <label for="num-interrogations" class="mr-2">Antal kända förhör:</label>
                <input type="number" name="num-interrogations" step="1" class="form-control col-sm-1 mr-2">
            </div>    
            <button type="button" id="add-interrogation-btn" class="btn btn-primary mt-2 mr-2">Lägg till förhör</button>
            <small class="form-text text-muted mb-4">Klicka för att lägga till länk till ett förhör.</small>
            <div class="form-group" id="interrogation-container">
            </div>
            <div class="form-group">
                <label for="follow-up">Polisens uppföljning mm:</label>
                <textarea name="follow-up" class="form-control" rows="2"></textarea>
                <small class="form-text text-muted">T.ex polisens kontroll av tipset, bemötande, förklaringar till observationen eller annat som kan vara relevant i sammanhanget.</small>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-danger">Skicka</button>
            </div>
        </form>
    </div>
    <div class="col full-height">
        <div id='addmap'>
    </div>
</section>

<script type="text/javascript" src="../../public/js/map_add_edit.js"></script>
<script type="text/javascript" src="../../public/js/client_add_edit.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC9FgYDKmsQnbjfrlIl38f8rHPqiLiUkX8&callback=initMap" async defer></script>